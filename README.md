# نظام إدارة المدرسة

نظام بسيط لإدارة المدارس الصغيرة يربط بين المعلمين والطلاب وأولياء الأمور تحت إشراف المدير.

## المميزات

- تسجيل الدخول لجميع الأدوار (المدير، المعلمين، الطلاب، أولياء الأمور)
- إدارة معلومات الطلاب (الدرجات، الحضور، السلوك)
- أدوات التواصل بين المعلمين وأولياء الأمور
- المهام الإدارية للمدير

## المتطلبات

- Node.js (v14+)
- MongoDB
- متصفح حديث يدعم JavaScript

## التثبيت

1. قم بتثبيت MongoDB وتأكد من تشغيله على الجهاز
2. استنسخ المشروع:
```
git clone <رابط المشروع>
cd school-system
```

3. قم بتثبيت الاعتمادات:
```
npm install
```

4. قم بإنشاء ملف `.env` (أو استخدم الملف الموجود) وأضف المتغيرات البيئية:
```
MONGODB_URI=mongodb://localhost:27017/school_system
SESSION_SECRET=school_management_system_secret
PORT=3000
```

5. قم بإعداد قاعدة البيانات وإضافة المستخدم الأول (المدير):
```
node setup.js
```

## تشغيل النظام

```
npm start
```

الآن يمكنك زيارة `http://localhost:3000` في المتصفح للوصول إلى النظام.

## الدخول للمرة الأولى

استخدم بيانات الدخول التالية للمدير:
- اسم المستخدم: admin
- كلمة المرور: admin123

**ملاحظة هامة:** قم بتغيير كلمة المرور بعد الدخول للمرة الأولى.

## الأدوار

### المدير
- إدارة المستخدمين (إضافة، تعديل، حذف)
- الإشراف على العملية التعليمية
- الوصول إلى جميع التقارير

### المعلم
- عرض قائمة الطلاب
- تسجيل الحضور
- إضافة وتعديل الدرجات
- التواصل مع أولياء الأمور

### الطالب
- عرض الملف الشخصي
- عرض الدرجات
- عرض سجل الحضور

### ولي الأمر
- عرض معلومات الأبناء
- عرض الدرجات والحضور للأبناء
- التواصل مع المعلمين

## التقنيات المستخدمة

- HTML/CSS/JavaScript للواجهة الأمامية
- Node.js و Express للخادم
- MongoDB لقاعدة البيانات
- Mongoose لنمذجة البيانات

## هيكل المشروع

```
/
├── config/          # ملفات الإعداد
├── controllers/     # وحدات التحكم
├── models/          # نماذج البيانات
├── public/          # الملفات الثابتة (CSS, JS, صور)
│   ├── css/
│   ├── js/
│   └── images/
├── routes/          # مسارات API
├── views/           # ملفات HTML
├── .env             # متغيرات البيئة
├── package.json     # معلومات المشروع والاعتمادات
├── server.js        # نقطة الدخول الرئيسية
└── setup.js         # سكريبت الإعداد الأولي
```

## الميزات الجديدة المضافة

### الشؤون المالية
- تسجيل المدفوعات والرسوم
- إدارة المصروفات
- هيكل الرسوم المرن
- تقارير مالية شاملة

### إدارة المكتبة
- فهرسة الكتب
- نظام الاستعارة والإرجاع
- تتبع الكتب المتأخرة
- تقارير المكتبة

### الواجبات المنزلية
- إنشاء وتوزيع الواجبات
- تسليم الواجبات إلكترونياً
- تقييم ومراجعة الواجبات
- رفع الملفات المرفقة

### الجداول الدراسية
- إنشاء الجداول الدراسية
- جداول الامتحانات
- عرض جداول المعلمين والطلاب

### نظام الإشعارات
- إرسال إشعارات مستهدفة
- إشعارات حسب الدور أو الصف
- تتبع حالة القراءة

## للاختبار السريع

إذا لم يكن لديك MongoDB مثبت، يمكنك استخدام قاعدة البيانات في الذاكرة:

```bash
node setup-test.js
npm start
```

## API Endpoints الجديدة

### الشؤون المالية
- `GET /finance/payments` - قائمة المدفوعات
- `POST /finance/payments` - تسجيل دفعة جديدة
- `GET /finance/expenses` - قائمة المصروفات
- `POST /finance/expenses` - تسجيل مصروف جديد

### المكتبة
- `GET /library/books` - قائمة الكتب
- `POST /library/books` - إضافة كتاب جديد
- `POST /library/borrow` - استعارة كتاب
- `POST /library/return/:borrowingId` - إرجاع كتاب

### الواجبات
- `GET /homework` - قائمة الواجبات
- `POST /homework` - إنشاء واجب جديد
- `POST /homework/:id/submit` - تسليم واجب
- `PUT /homework/:homeworkId/grade/:submissionId` - تقييم واجب

### الجداول
- `GET /schedule/class/:grade/:classroom` - الجدول الدراسي
- `POST /schedule/class` - إنشاء جدول دراسي
- `GET /schedule/exams/:grade` - جدول الامتحانات

### الإشعارات
- `GET /notifications/my` - إشعارات المستخدم
- `POST /notifications` - إرسال إشعار جديد
- `PUT /notifications/:id/read` - تحديد إشعار كمقروء

## المساهمة

نرحب بمساهماتكم واقتراحاتكم لتحسين النظام.

## الترخيص

هذا المشروع تحت ترخيص MIT.